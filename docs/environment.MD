<!-- Intro To Env Files -->
# An Introduction to Environment Files

The environment file is a configuration file used to store settings and parameters that define how an application should behave, depending on the environment it is installed in. Typically they end with `.env` and contain key-value pairs such as:

```sh
Key=Value
```

# The AlignDx environment variables

Below are described each of the environmental variables required by the AlignDx platform to install correctly. It is recommended that the developer look through these before creating their own file. Some tips: 

For keys that need to be generated by the developer, you can do this using any of the online secret key generators, or generate them locally using linux.

> **_NOTE:_**  An [example environment file](/docs/example_env_file.MD) is provided under the docs folder, with example values. Note that these values should **NOT** be used in production.

## API  

```
BASE_URL=The default URL for the platform (access point) 
API_URL=The URL to access the system API
ORIGINS=Allowed URLs for CORS policy
SECRET_KEY=Used to decrypt and encrypt authentication processes 
CELERY_API_KEY=Used to access celery system
```

## Databases

```
POSTGRES_USER=A username for the user accessing the postgres db
POSTGRES_PASSWORD=A password for the postgres db
POSTGRES_DB=A name for the db
POSTGRES_PORT=The port for the database (typically 5432)
DATABASE_URL=The URL for the database. You can simply copy and paste the following, without making changes: 

    postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:${POSTGRES_PORT}/${POSTGRES_DB}

PGDATA= This is the location where postgres stores its data. 

REDIS_PASSWORD=The password for the redis database
REDIS_PORT=The port for the redis db (typically 6379)
REDIS_DB=The database you want to connect to (default is 0)
REDIS_HOST=The redis host
REDIS_URL=The URL for the database. You can simply copy and paste the following, without making changes: 
    
    redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

```

## Celery
```
CELERY_BROKER_URL=The Broker for Celery. In this case, its redis.
CELERY_RESULT_BACKEND=The Storage backend for Celery, which is once again redis.
```

## Volume Mounts Config
```
PROJECT_PATH=The root install location for the project. This is necessary so that the system can correctly located pipelines files and work with them across multiple containers.
```

## Pipelines
```
PIPELINES_REPO=A repository containing the pipelines schemas
PIPELINES_REPO_TOKEN=The github token necessary to download the pipelines
```

## Companion
```
TUS_ENDPOINT=The tus server endpoint for resumable uploads

COMPANION_DOMAIN=The companion server endpoint for remote resources
COMPANION_SECRET=Some secret for companion to encrypt and decrypt messages
COMPANION_DATADIR=The storage directory for companion data

<!-- Note these are optional -->
COMPANION_GOOGLE_KEY=key
COMPANION_GOOGLE_SECRET=google_secret
COMPANION_DROPBOX_KEY=key
COMPANION_DROPBOX_SECRET=secret
COMPANION_ONEDRIVE_KEY=key
COMPANION_ONEDRIVE_SECRET=secret
```

## Frontend
```
NEXT_PUBLIC_BASE_URL=The public url for next js, necessary for routing.
NEXT_PUBLIC_BACKEND_ACCESS_URL=The public API url necessary for sending API requests.
NEXT_PUBLIC_TUS_ENDPOINT=The public TUS endpoint.
NEXT_PUBLIC_COMPANION_URL=The public companion endpoint
```

## PGAdmin
```
PGADMIN_DEFAULT_EMAIL=Email for pgadmin account
PGADMIN_DEFAULT_PASSWORD=Password to access pgadmin account
PGADMIN_LISTEN_PORT=The port for pgadmin
```